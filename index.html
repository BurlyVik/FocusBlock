
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>C840 Digital Forensics Flashcards</title>
  <style>
    html, body { height: 100%; }
    body {
      min-height: 100vh;
      margin: 0;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      font-family: Arial, sans-serif;
    }
    #main-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      max-width: 900px;
      margin-top: 30px;
    }
    #qCount {
      font-size: 22px;
      margin-bottom: 12px;
      text-align: center;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .flashcard-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 36px;
      margin-bottom: 16px;
      min-height: 280px;
    }
    .flashcard {
      width: 420px;
      height: 230px;
      perspective: 1000px;
      margin: 0;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
      border-radius: 14px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.18);
      background: white;
    }
    .card.flipped { transform: rotateY(180deg); }
    .side {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 30px;
      box-sizing: border-box;
      border-radius: 14px;
      background: white;
      font-size: 19px;
      text-align: center;
      min-height: 120px;
    }
    .back { transform: rotateY(180deg); }
    .options {
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-width: 310px;
      height: 230px;
      gap: 16px;
    }
    .option {
      background: #fff;
      border: 1.5px solid #bdbdbd;
      border-radius: 8px;
      padding: 16px 16px;
      font-size: 17px;
      transition: box-shadow .2s;
      cursor: pointer;
      min-height: 35px;
      display: flex;
      align-items: center;
      box-shadow: 0 1px 4px rgba(0,0,0,0.07);
    }
    .option.selected { border: 2px solid #333; background: #e3e3fa; }
    .correct { background: #c8e6c9 !important; border-color: #66bb6a !important;}
    .wrong { background: #ffcdd2 !important; border-color: #e57373 !important;}
    .bookmark-btn {
      background: transparent;
      font-size: 24px;
      padding: 5px 10px;
      border: none;
      vertical-align: middle;
      cursor: pointer;
      transition: color .18s;
    }
    .bookmark-btn.bookmarked { color: #FFD700; }
    .show-bookmarked { background: #ffc107; color: #333; font-weight: bold; }
    .controls-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin: 16px 0 0 0;
    }
    #feedback {
      font-size:18px;
      margin-top:10px;
      min-height:32px;
      text-align: center;
    }
    @media (max-width: 900px) {
      .flashcard-container { flex-direction: column; gap: 12px;}
      .options { min-width: 200px; width: 95vw; }
      .flashcard { width: 98vw; min-width:220px; max-width:98vw; }
    }
  </style>
</head>
<body>
<div id="main-wrap">
  <h1>C840 Digital Forensics Flashcards</h1>
  <div id="qCount">Question 1 of 10</div>
  <div class="flashcard-container">
    <div class="flashcard" onclick="flipCard(event)">
      <div class="card" id="card">
        <div class="side front" id="question">Loading...</div>
        <div class="side back" id="answer">Loading...</div>
      </div>
    </div>
    <div class="options" id="options"></div>
  </div>
  <div class="controls-row">
    <button class="bookmark-btn" id="bookmarkBtn" onclick="toggleBookmark()" title="Bookmark this card">&#9734;</button>
    <button onclick="prevCard()">Previous</button>
    <button onclick="nextCard()">Next</button>
    <button onclick="toggleShowBookmarked()" id="showBookmarkedBtn">Show Bookmarked</button>
  </div>
  <div class="controls-row">
    <button onclick="submitAnswer()" id="submitBtn">Submit Answer</button>
  </div>
  <div id="feedback"></div>
</div>
<script>
  
  let current = 0;
  let selected = null;
  let answered = false;
  let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')||"[]");
  let showOnlyBookmarked = false;
  let bookmarkedOrder = [];

  function showCard(index) {
    document.getElementById('card').classList.remove('flipped');
    document.getElementById('question').innerText = cards[index].q;
    document.getElementById('answer').innerText = cards[index].a;
    selected = null;
    answered = false;
    document.getElementById('feedback').innerText = '';
    document.getElementById('submitBtn').disabled = false;
    showOptions(index);
    updateBookmarkStar();
    updateCountDisplay();
  }

  function flipCard(e) {
    if (e.target.classList.contains("option") || e.target.classList.contains("bookmark-btn")) return;
    document.getElementById('card').classList.toggle('flipped');
  }

  function nextCard() {
    let arr = showOnlyBookmarked ? bookmarkedOrder : Array.from({length: cards.length}, (_,i)=>i);
    if (arr.length === 0) return;
    let idx = arr.indexOf(current);
    idx = (idx + 1) % arr.length;
    current = arr[idx];
    showCard(current);
  }

  function prevCard() {
    let arr = showOnlyBookmarked ? bookmarkedOrder : Array.from({length: cards.length}, (_,i)=>i);
    if (arr.length === 0) return;
    let idx = arr.indexOf(current);
    idx = (idx - 1 + arr.length) % arr.length;
    current = arr[idx];
    showCard(current);
  }

  function showOptions(index) {
    const optionsDiv = document.getElementById('options');
    optionsDiv.innerHTML = '';
    let correct = cards[index].a;
    let wrongs = cards.filter((c,i)=>i!==index).map(c=>c.a);
    wrongs = wrongs.sort(() => 0.5 - Math.random()).slice(0,2);
    let answers = [correct, ...wrongs].sort(() => 0.5 - Math.random());
    answers.forEach(ans => {
      let div = document.createElement('div');
      div.className = 'option';
      div.innerText = ans;
      div.onclick = () => selectOption(div, ans, correct);
      optionsDiv.appendChild(div);
    });
  }

  function selectOption(div, ans, correct) {
    if (answered) return;
    let opts = document.querySelectorAll('.option');
    opts.forEach(o=>o.classList.remove('selected'));
    div.classList.add('selected');
    selected = ans;
  }

  function submitAnswer() {
    if (answered || selected === null) return;
    answered = true;
    let correct = cards[current].a;
    let opts = document.querySelectorAll('.option');
    opts.forEach(o=>{
      if (o.innerText === correct) o.classList.add('correct');
      if (selected === o.innerText && selected !== correct) o.classList.add('wrong');
      o.onclick = null;
    });
    if (selected === correct) {
      document.getElementById('feedback').innerText = 'Correct!';
    } else {
      document.getElementById('feedback').innerText = 'Incorrect.';
    }
    document.getElementById('submitBtn').disabled = true;
  }

  function updateBookmarkStar() {
    let btn = document.getElementById('bookmarkBtn');
    if (bookmarks.includes(current)) {
      btn.innerHTML = '&#9733;';
      btn.classList.add('bookmarked');
    } else {
      btn.innerHTML = '&#9734;';
      btn.classList.remove('bookmarked');
    }
  }

  function toggleBookmark() {
    let idx = bookmarks.indexOf(current);
    if (idx === -1) {
      bookmarks.push(current);
    } else {
      bookmarks.splice(idx, 1);
    }
    localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
    updateBookmarkStar();
    updateBookmarkedOrder();
  }

  function updateBookmarkedOrder() {
    bookmarkedOrder = bookmarks.slice();
    if (showOnlyBookmarked && !bookmarkedOrder.includes(current)) {
      if (bookmarkedOrder.length > 0) {
        current = bookmarkedOrder[0];
        showCard(current);
      } else {
        document.getElementById('question').innerText = 'No bookmarked cards.';
        document.getElementById('answer').innerText = '';
        document.getElementById('options').innerHTML = '';
        document.getElementById('feedback').innerText = '';
        updateCountDisplay();
      }
    }
  }

  function toggleShowBookmarked() {
    showOnlyBookmarked = !showOnlyBookmarked;
    document.getElementById('showBookmarkedBtn').classList.toggle('show-bookmarked', showOnlyBookmarked);
    updateBookmarkedOrder();
    let arr = showOnlyBookmarked ? bookmarkedOrder : Array.from({length: cards.length}, (_,i)=>i);
    if (arr.length > 0) {
      current = arr[0];
      showCard(current);
    } else {
      document.getElementById('question').innerText = 'No bookmarked cards.';
      document.getElementById('answer').innerText = '';
      document.getElementById('options').innerHTML = '';
      document.getElementById('feedback').innerText = '';
      updateCountDisplay();
    }
  }

  function updateCountDisplay() {
    let arr = showOnlyBookmarked ? bookmarkedOrder : Array.from({length: cards.length}, (_,i)=>i);
    let countElem = document.getElementById('qCount');
    if (arr.length === 0) {
      countElem.innerText = 'No questions';
    } else {
      let position = arr.indexOf(current) + 1;
      countElem.innerText = "Question " + position + " of " + arr.length;
    }
  }

  // On load
  updateBookmarkedOrder();
  let arr = showOnlyBookmarked ? bookmarkedOrder : Array.from({length: cards.length}, (_,i)=>i);
  current = arr.length > 0 ? arr[0] : 0;
  showCard(current);
</script>

<script>
let cards = [];

fetch('C840_Flashcards_CLEAN.json')
  .then(response => response.json())
  .then(data => {
    cards = data;
    updateBookmarkedOrder();
    current = bookmarkedOrder.length > 0 ? bookmarkedOrder[0] : 0;
    showCard(current);
  })
  .catch(error => {
    document.getElementById("question").textContent = "Failed to load flashcards.";
    console.error("Error loading cards:", error);
});
</script>

</body>
</html>
